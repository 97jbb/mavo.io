<!DOCTYPE html>
<html lang="en" class="docs">
<head>
	<meta charset="UTF-8">
	<title>Storage - Mavo Documentation</title>
	<link rel="stylesheet" href="/mavo/mavo.css" />
	<link rel="stylesheet" href="/css/style.css">
	<link rel="icon" href="/favicon.ico">
	<link rel='stylesheet' href='/docs/style.css'>
</head>


<body class="language-markup">

<header>
	<h1 class="logo">
		<a href="/"><img src="/logo.svg" alt="Mavo"></a>
	</h1>
	<nav>
	<a href="/docs/primer">Get started</a>
	<a href="/docs">Docs</a>
	<a href="/demos">Demos</a>
	<a href="#" class="soon">Plugins</a>
	<a href="#" class="soon">Github</a>
</nav>

</header>


<h2>Storage</h2>

<section>
	<p>
		The <code>mv-storage</code> attribute tells Mavo where to store data, and <code>mv-source</code> where to read it from, if different.
	</p>
</section>

<section>
	<h1>Disabling storage</h1>

	<p>
		To disable storage, just don't include an <code>mv-storage</code> attribute, or specify <code>mv-storage="none"</code>.
		You could also disable storage on a per-property basis, by specifying <code>mv-storage="none"</code> on individual properties.
		This is useful when you don't need a property's value to be saved. Properties whose values are specified via expressions have <code>mv-storage="none"</code> by default.
	</p>
</section>

<section>
	<h1>Local storage</h1>

	<p>You can save your data in the browser‚Äôs <code>localStorage</code>, by using the keyword <code>local</code> as the value of the <code>mv-storage</code> attribute (<code>mv-storage="local"</code>).</p>

	<p>This can be useful if you are not planning to share your data with other people.
		Please note that most <code>localStorage</code> implementations have a limit of 4MB.
		Also, <code>localStorage</code> is bound by the same-origin policy. This means that if you change your URL, your data will be left behind!
	</p>
</section>

<section>
	<h1>Github</h1>

	<figure>
		<video src="/videos/gh-auth.mp4" controls></video>
		<figcaption>Mavo takes care of authentication when using Github as your storage backend.</figcaption>
	</figure>

	<p>The Github backend provides remote storage, which is useful if you need to share data with other people.
		Mavo will provide login controls and will not allow any edits until the viewer has logged in and has commit permissions.
		If the file and/or repo does not exist, Mavo will create it upon saving.
		The value of the <code>mv-storage</code> attribute can take almost any Github file URL, as well as some more fuzzy ones.
	</p>

	<p>
		<strong>You don‚Äôt need to understand how Github works to use it for storing your data.</strong>
		If you don‚Äôt know what a repo or a branch is, do not worry. Just sign up for a <a href="http://github.com">Github</a> account, and specify <code>https://github.com/[username]</code> as the value of the <code>mv-storage</code> attribute.
		Mavo will automatically create an <code>mv-data</code> repo for you and a file to store your data named <code>[appname].json</code> where <code>[appname]</code> is the <a href="/docs/primer/#mv-app">name of your app</a>.
	</p>

	<p>If you <em>do</em> understand how Github works, you can specify where your data should be stored with more precision:</p>

	<dl>
		<dt><code>https://github.com/[username]/[reponame]</code></dt>
		<dd>Mavo will create a file called <code>[appname].json</code> in that repository.</dd>

		<dt><code>https://github.com/[username]/[reponame]/[filename]</code></dt>
		<dd>Mavo will assume a default branch of <code>master</code></dd>

		<dt><code>https://github.com/[username]/[reponame]/blob/[branch]/[filename]</code></dt>
		<dd>The URL Github gives you when using its file browser. As specific as it gets, Mavo makes no assumptions.</dd>

		<dt><code>https://raw.githubusercontent.com/[username]/[reponame]/[branch]/[filename]</code></dt>
		<dd>The URL that shows when you click the button <em>Raw</em> from the Github file browser.</dd>
	</dl>

	<p class="note">Note that <em>[filename]</em> above could include a path, e.g. <code>foo/bar/baz.json</code>.</p>

	<p>Github Pages URLs (<code>https://[username].github.io/[reponame]/[filename]</code>) are not supported, because it‚Äôs impossible for Mavo to figure out where to save the data just from the Github Pages URL.</p>
</section>

<!-- <section>
	<h1>Dropbox</h1>
	<p>TODO</p>
</section> -->

<section>
	<h1>HTML element</h1>
	<p>To store data in another HTML element in the page, use an <code>mv-storage</code> value of <code>#[elementid]</code> where <code>[elementid]</code> is the id of the element you want to use to store data in.</p>

	<section class="example">
		<script type="text/plain">
<pre id="data">{
	"firstName": "Lea",
	"lastName": "Verou"
}</pre>
<div mv-app="elementStorage" mv-storage="#data">
	<span property="firstName">David</span>
	<span property="lastName">Karger</span>
</div>
		</script>
	</section>

	<p class="warning">Note that unless you take extra steps to persist the content of that element, <strong>the data will be lost after a page refresh</strong>.
		This storage adapter is mainly useful for debugging purposes or to combine Mavo with other libraries.</p>
</section>

<section>
	<h1>Reading from a different data source</h1>
	<p>Sometimes you want to load data from one place and save to a different place, for a variety of reasons.
		If this is what you want, Mavo has you covered!
		Just use the <code>mv-source</code> attribute to specify where the data will be read <strong>from</strong> and the <code>mv-storage</code> attribute to specify where the data will be stored.
		Note that if you use both <code>mv-source</code> and <code>mv-storage</code>, only login controls for the latter will be shown in the Mavo bar.
	</p>
</section>

<section>
	<h1>Providing initial data</h1>
	<p>Sometimes you want to store your application‚Äôs data in the local store or another initially empty storage, but you want the app to start with some data already in place, <em>iff its storage is empty</em>.
	For this purpose, you can use the <code>mv-init</code> attribute. It will be used just like the <code>mv-source</code> attribute above, but only <strong>if no data has been stored yet</strong>.</p>
</section>

<section id="url-params">
	<h1>Changing mv-storage, mv-source, and mv-init via the URL</h1>

	<p>
		You can change the storage location of any Mavo app via the URL.
		This way, you can reuse the same Mavo app to edit multiple sets of data with the same general format or even reuse someone else‚Äôs Mavo app to store your own data in your own preferred location!
		If there is only one Mavo app on the page (or if the one you are interested in is first), you use the <code>storage</code>, <code>source</code>, and <code>init</code> URL parameters.
		For example, here is <a href="/demos/todo?storage=local">the To-Do list from the demos with a local data store</a>.
	</p>
	<p>
		While the <code>storage</code>, <code>source</code>, and <code>init</code> URL parameters only work for the first Mavo app on the page, you can use <code>[appname]-storage</code>, <code>[appname]-source</code>, and <code>[appname]-init</code> for any Mavo app, regardless of its placement on the page.
		For example, here is <a href="/demos/todo?todo-storage=local">the local To-Do list again</a>, using URL parameters that include the app name.
	</p>
</section>

<footer>
	<div>
		<p>
			Made with &hearts; by <a href="http://lea.verou.me">Lea Verou</a> and <a href="https://github.com/LeaVerou/mavo/graphs/contributors">contributors</a>
			&bull; <a href="https://twitter.com/mavohtml">@mavohtml on üê¶ Twitter</a>
			&bull; <a href="https://github.com/leaverou/mavo">Github</a>
		</p>
		<p>This work was supported in part by a collaborative grant from the <a href="http://www.wistron.com/">Wistron Corporation</a>.</p>
	</div>


	<a href="http://mit.edu" class="logo"><img src="/img/logo-mit.svg" alt="MIT" /></a>
	<a href="http://csail.mit.edu" class="logo"><img src="/img/logo-csail.svg" alt="CSAIL" /></a>
</footer>

<script src="/mavo/mavo.js"></script>
<script src="/js/prism.js"></script>
<script src="/js/sitewide.js"></script>


<script src="/js/docs.js"></script>


</body>
</html>
