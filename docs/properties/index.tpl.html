@@include('_head-docs.html', {
	"title": "Properties"
})
<body class="language-markup">

@@include('_header.html')

<h2>Storage</h2>

<section>
	<p>
		The <code>property</code> attribute tells Mavo which elements are important, e.g. are saved, editable, used in expressions, or all three.
		Elements with this attribute are often referred to as <em>properties</em> or <em>property elements</em>.
	</p>
</section>

<section>
	<h1>Property name rules</h1>

	<p>Its value should describe the element, similarly to a <code>id</code> or <code>class</code> attribute. It can contain <strong>only</strong> letters, numbers and underscores (_).
		If it happens to be the same as the element’s <code>id</code> or <code>class</code> attributes, you don’t need to provide a value.
		For example, the following are all equivalent:
	</p>

	<script type="text/plain">
		<div property class="name">Lea Verou</div>
		<div property id="name">Lea Verou</div>
		<div property="name">Lea Verou</div>
	</script>

	<p>If you need inspiration for names, you could look at <a href="http://schema.org">schema.org</a>.</p>
</section>

<section>
	<h1>Editing</h1>

	<p>If the <code>property</code> attribute is used on elements that are not form elements, they are made editable, and Mavo generates a button
	for switching between modes:</p>

	<section class="example">
		<script type="text/plain">
			<span property="firstName">Lea</span> <span property="last_name">Verou</span>
			<span>- I don’t have a property attribute, so I’m not editable.</span>
		</script>
	</section>

	<hr />

	<p>You can put the <code>property</code> attribute on <strong>any</strong> HTML5 element, and Mavo knows how to make it editable:</p>

	<section class="example">
		<script type="text/plain">
			<meter property="rating" min="1" value="3" max="5"></meter>
			<time property="birthday" datetime="2014-06-01">1 Jun 2014</time>
			<img property="avatar" src="http://i.imgur.com/LPeWcag.png" />
		</script>
	</section>

	<p>Mavo can also be taught about new element types with different ways to be edited (e.g. rich text), via <a href="https://plugins.mavo.io">plugins</a>.</p>
</section>

<section id="mv-edit">
	<h1>Customize editing: The mv-edit attribute</h1>

	<p>In some cases, you may want to customize how a property is edited.
		For example, instead of using a text field, you may want to restrict choices to those in a <code>&lt;select></code> menu.
	For those cases, you can do one of two things:</p>

	<ul>
		<li>Link to a form control via <code>mv-edit</code> <em>(recommended)</em></li>
		<li>Nest a form control directly inside your property</li>
	</ul>

	<p>The value of <code>mv-edit</code> is a CSS selector. If the CSS selector matches multiple elements on the page, the first one will be used.
		The element you linked to remains intact. Instead, it is cloned for the editing.
		If the original element changes (e.g. perhaps that's also populated by Mavo! It could even be an entirely separate Mavo app, like in <a href="/demos/talks/">this demo</a>), a new clone is created.
	</p>

	<p>In addition to using the element for editing, its default value also becomes the property’s default value (unless <code>mv-default</code> is set of course).</p>

	<section class="example side-by-side">
		<script type="text/plain">
			I’m from
			<img src="/demos/talks/flags/[country].png" />
			<span property="country" mv-edit="#countries"></span>

			<div hidden>
				<select id="countries">
					<option value="gr">Greece</option>
					<option value="gb">United Kingdom</option>
					<option value="us">United States</option>
				</select>
			</div>
		</script>
	</section>
</section>

<section id="mv-edit-star">
	<h1>The mv-edit-* family of attributes</h1>

	<p>In some cases, you don’t want to entirely replace the element used for editing by default, but merely to set a few attributes on it.
	For example, to change an <code>&lt;input></code> type, or to add autocomplete via <code>&lt;datalist></code>.
	For that, you can use <code>mv-edit-attributeName="value"</code> and <code>attributeName="value"</code> will be set on the default editing control.</p>

	<section class="example">
		<p>Edit the country and type "United" to see a list of suggestions:</p>
		<script type="text/plain">
			I’m from
			<span property="country" mv-edit-list="countries2">Greece</span>

			<div>
				<datalist id="countries2">
					<option>Greece</option>
					<option>United Kingdom</option>
					<option>United States</option>
				</datalist>
			</div>
		</script>
	</section>
</section>

<section id="mv-default">
	<h1>Default values: The mv-default attribute</h1>

	<p>The <code>mv-default</code> attribute lets you set default values for properties that have no data yet.
		If it’s used with no value, the default value is the data in your HTML.
	</p>

	<p><code>mv-default</code> is dynamic: When it changes, if the current value of the property matches the previous default, it will be updated as well.
	You can take advantage of that and use <code>mv-default</code> to even keep properties in sync, like in the example below (for a real-world demo of this pattern, check out the <a href="/demos/svgpath">SVG Path builder</a>):</p>

	<section class="example side-by-side">
		<p>Note that changing the first number changes the second, until you edit the second and make it different:</p>
		<script type="text/plain">
			<input type="number" property="x" mv-default="5" />
			<input type="number" property="y" mv-default="[x]" />
		</script>
	</section>
</section>

<section>
	<h1>The mv-attribute attribute</h1>

	<p>Mavo automatically assumes that the data each property element holds is stored either as its content or in a "primary" attribute, different per element type.
		Most of the time this works great, and you don't have to think about it. However, sometimes this heuristic will fail.
		In those cases, you can correct Mavo's prediction by using the <code>mv-attribute</code> attribute.
		Its value is either the name of the attribute that holds data, or <code>none</code> for no attribute (element contents).</p>

	<p>For example, an <code>&lt;a></code> element's primary data attribute is <code>href</code>.
		However, sometimes you want to make the content editable instead, and even reference it in the <code>href</code> attribute via an expression.
		You can use the <code>mv-attribute</code> for that:</p>

	<section class="example">
		<script type="text/plain">
			<a href="mailto:[email]" property="email" mv-attribute="none">lea@mavo.io</a>
		</script>
	</section>
</section>

<section id="mv-mode">
	<h1>The mv-mode attribute</h1>
	<p>Possible values: <code>edit</code> or <code>read</code>.</p>

	<p>The purpose of this attribute is twofold:</p>

	<ol>
		<li>Mavo sets <code>mv-mode="edit"</code> on properties when they are being edited. This allows you to customize your design in the editing state
		by using <code>[mv-mode="edit"]</code> selectors</li>
		<li>If you use <code>mv-mode="read"</code> or <code>mv-mode="edit"</code> on a property, Mavo applies that state and does not change it when the state of the rest of the app changes.
		You can change it yourself, via expressions.</li>
	</ol>

	<p>The latter allows many cool things:</p>

	<ul>
		<li>Use <code>mv-mode="read"</code> to create "constants": Properties that are saved but not edited.</li>
		<li>Use <code>mv-mode="edit"</code> for properties (or entire apps, if you use it on the Mavo root) that don't make sense in read mode.</li>
		<li>Use <code>mv-mode="[if (condition, read, edit)]"</code> on collection items, to edit them separately from the rest of the app (useful with large collection items such as blog posts)</li>
	</ul>
</section>

@@include('_footer-docs.html')

</body>
</html>
