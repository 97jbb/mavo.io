<!DOCTYPE html>
<html lang="en" class="docs">
<head>
	<meta charset="UTF-8">
	<title>Wysie: Documentation for HTML authors</title>
	<link rel="stylesheet" href="../wysie.css" />
	<link rel="stylesheet" href="../website/style.css">
</head>
<body class="language-markup">

<header>
	<h1 class="logo">
		<img src="../logo.svg" alt="Wysie: What you see is editable">
		Introduction and first steps
	</h1>
</header>

<input type="checkbox" id="show-examples" checked />
<label for="show-examples">Show examples?</label>

<section>
	<h1>Defining a wysie app</h1>

	<p>The <code>data-store</code> attribute has two purposes: its presence tells wysie that it should pay attention to what is inside that element
		and its value tells wysie where to store any data.
		The value of the <code>data-store</code> attribute is always a valid URL and has the following meaning:</p>

	<dl>
		<dt><code>""</code></dt>
		<dd>An empty value (or no value) disables storage.</dd>

		<dt><code>#hash</code></dt>
		<dd>A local hash can mean two things, depending on whether an element exists in the page with that id:
			<ol>
				<li>If an element exists, that element will receive any saved data.</li>
				<li>If there is no corresponding element, the data will be saved in the browser (<code>localStorage</code>).</li>
			</ol>
		</dd>

		<dt><code>https://www.dropbox.com/s/[lettersandnumbers]/[filename]?dl=0</code></dt>
		<dd>
			This is the URL that Dropbox gives you if you click “Share” on a file.
			In that case, the data will be saved back to Dropbox, and wysie will ask you to log in to edit or save.
		</dd>
	</dl>
</section>

<section>
	<h1>The property attribute</h1>

	<p>The <code>property</code> attribute tells wysie which elements should be editable. Its value should describe the element, similarly to a <code>id</code> or <code>class</code> attribute.
		It can contain letters, numbers and underscores (_).</p>

	<section class="example">
		<script type="text/plain">
			<span property="firstName">Lea</span> <span property="last_name">Verou</span>
			<span>- I don’t have a property attribute, so I’m not editable.</span>
		</script>
	</section>

	<p>If it happens to be the same as the element’s <code>id</code> or <code>class</code> attributes,
		you don’t need to provide a value:</p>

	<script type="text/plain">
		<!-- In all of the following, the property value is "name" -->
		<div property class="name">Lea Verou</div>
		<div property id="name">Lea Verou</div>
		<div property="name">Lea Verou</div>
	</script>

	<hr />

	<p>You can put the <code>property</code> attribute on <strong>any</strong> HTML5 element, and wysie knows how to make it editable:</p>

	<section class="example">
		<script type="text/plain">
			<meter property="rating" min="1" value="3" max="5"></meter>
			<time property="birthday" datetime="2014-06-01"></time>
			<img property="avatar" src="http://i.imgur.com/LPeWcag.png" />
		</script>
	</section>

	<hr />

	<p>Form elements don’t need any editing UI, since they are already editable:</p>

	<section class="example">
		<script type="text/plain">
			<input property="name" value="Lea Verou"/>
			<input property="strength" type="range" />
			<select property="country">
				<option value="us">United States</option>
				<option value="gb">United Kingdom</option>
				<option value="jp">Japan</option>
			</select>
		</script>
	</section>

	<p>Note how there is no “Edit” button in the example above since all its properties are form elements, which are always editable.</p>
</section>

<section>
	<h1>Grouping</h1>

	<p>Sometimes the value of a property is not a simple piece of data that can be described with one element, but a group of elements.
	If an element with a <code>property</code> attribute contains other properties inside it, it becomes a group.</p>

	<section class="example">
		<script type="text/plain">
			<article property="author">
				<h1 property="name">Lea Verou</h1>
				<img property="avatar" src="http://lea.verou.me/logo.svg"/>
			</article>
		</script>
	</section>

	<p>On their own, groups don’t do much, but they can be very useful when combined with lists and expressions, explained next.</p>
</section>

<section>
	<h1>Creating lists: The data-multiple attribute</h1>

	<p>Let’s assume we have a list of hobbies that we want to make editable.
		We <em>could</em> add <code>property</code> attributes to every item:</p>

	<section class="example">
		<script type="text/plain">
			Hobbies:
			<ul>
				<li property="hobby">Eating</li>
				<li property="hobby2">Sleeping</li>
				<li property="hobby3">Purring</li>
			</ul>
		</script>
	</section>

	<p>This works, but we cannot add new hobbies or delete existing ones.
		To do that, we need the <code>data-multiple</code> attribute, which tells wysie that <strong>this element can be multiplied</strong>:</p>

	<section class="example">
		<script type="text/plain">
			Hobbies:
			<ul>
				<li property="hobby" data-multiple>Eating</li>
			</ul>
		</script>
	</section>

	<p class="note">Note that the <code>data-multiple</code> attribute goes on <strong>the element that will be multiplied, NOT the container of the collection</strong>!</p>

	@@@ TODO explain collections of objects @@@
</section>

<section>
	<h1>Expressions</h1>

	<p>You can dynamically refer to the value of any property you have defined, anywhere, by putting an <code>=</code> sign in front of it.</p>

	<section class="example">
		<p>Move the slider and check how both expressions are updated:</p>
		<script type="text/plain">
			<p>Slider value: =strength/100</p>
			<input type="range" property="strength" title="=strength%" />
		</script>
	</section>

	<p>Note how in the example above, <code>=strength/100</code> did not actually divide the value of the <code>strength</code> property by <code>100</code>.
		This is because we wanted to use "/100" as a literal, to express a value out of a 100.
	To not just print the values of properties, but also do calculations with them, you need to <strong>enclose the expression in parentheses</strong>.</p>

	<section class="example">
		<p>Move the slider and check how both expressions are updated:</p>
		<script type="text/plain">
			<p>Slider value: =(strength/100)</p>
			<input type="range" property="strength" title="=strength%" />
		</script>
	</section>

	<p>You can also refer to properties whose value depends on an expression.</p>

	<section class="example color-picker">
		<p>Making a bare-bones HSL color picker with Wysie expressions:</p>
		<script type="text/plain">
			<div style="background-color: =color;">
				<input type="range" property="hue" max="360" />
				<input type="range" property="saturation" />
				<input type="range" property="lightness" />

				<input property="color" value="hsl(=hue, =saturation%, =lightness%)" readonly />
			</div>
		</script>
	</section>

	<p class="note">Note that properties whose values are expressions are called “computed properties” and are not saved.</p>

	<hr />

	<p>If there are <a href="#groups">groups</a> and there are properties with the same name inside and outside the group,
		the value <strong>closest to your expression</strong> will be used, with parent groups having priority over inner groups.</p>

	<section class="example scoped-expressions">
		<h1>Example: Grouping & Expressions</h1>
		<script type="text/plain">
			<p>Hi, I’m =firstname =lastname</p> <!-- From inner group -->

			<div property="person">
				<span property="firstname">Lea</span>
				<span property="lastname">Verou</span>
				<p>Hi, I’m =firstname =lastname</p>

				<div property="mother">
					<span property="firstname">Maria</span>
					<!-- Last name from parent group -->
					<p>Hi, I’m =firstname =lastname</p>

					<div property="mother">
						<span property="firstname">Areti</span>
						<!-- Last name from grandparent group -->
						<p>Hi, I’m =firstname =lastname</p>
					</div>
				</div>
			</div>
		</script>
	</section>

	@@@ TODO explain functions, aggregates @@@
</section>

<section>
	<h1>Finding mistakes</h1>

	<p>You can add a <code>debug</code> class on any element and after reloading you will get a table on every group inside it with all its expressions.
	<strong>The expressions in the table are editable</strong> and you can see the results of your edits as you type, both in the table and in your app.
	Hovering over the elements in the last column will reveal them in the app.</p>

	<section class="example">
		<script type="text/plain">
			<div data-store class="debug">
				<p>
					<label>x: <input type="number" property="x" value="15" /></label>
					<label>Y: <input type="number" property="y" value="5" /></label>
				</p>
				<ul>
					<li>x + y is =(x + y)</li>
					<li>x - y is =(x - y)</li>
					<li>x * y is =(x * y)</li>
					<li>x / y is =(x / y)</li>
				</ul>
			</div>
		</script>
	</section>
</section>

<script src="../../bliss/bliss.js"></script>
<script src="docs.js"></script>
<script src="../wysie.js"></script>
<script src="../website/prism.js"></script>

</body>
</html>
